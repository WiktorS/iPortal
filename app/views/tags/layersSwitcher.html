#{list _sources, as:'source'}
#{if models.MapSourceCollection.getInstance().canBeUsed(source)}
<div class="well tier1">
  <section>
    <i class="icon-plus icon-white"></i>
    <input id="toggler-${source.id}" type="checkbox" class="source-toggler" />
    <label><h3>${source.displayName}</h3></label>
  </section>
  <div id="source_${source.name}" class="tier2">

  #{list source.webMapServices, as:'wms'}
  #{if models.MapWMSCollection.getInstance().canBeUsed(wms)}
    <section>
      <i class="icon-plus icon-white"></i>
      <input id="toggler-${source.id}-${wms.id}" type="checkbox" class="wms-toggler" />
      <label><h4>${wms.displayName}</h4></label>
    </section>
    <div id="wms_${source.name}_${wms.name}" class="tier3">

    #{list wms.layers, as: 'layer'}
    #{if layer.canBeUsed}
      <section>
        <input id="toggler-${source.id}-${wms.id}-${layer.id}" type="checkbox" class="layer-toggler" />
        <label for="toggler-${source.id}-${wms.id}-${layer.id}"><h5>${layer.displayName}</h5></label>
      </section>
    #{/if}
    #{/list}

    </div>
  #{/if}
  #{/list}

  </div>
</div>
#{/if}
#{/list}
